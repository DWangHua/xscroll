!function(){var e={},t={},n={},i={};e=function(e){function t(){}function n(e,n){var i;return Object.create?i=Object.create(e):(t.prototype=e,i=new t),i.constructor=n,i}function i(e,t){if(e){if(e.nodeType)return[e];var t=t&&t.nodeType?t:document;return e&&"string"==typeof e?t.querySelectorAll(e):void 0}}for(var r=/\\?\{([^{}]+)\}/g,s="",o=/^[\s\xa0]+|[\s\xa0]+$/g,l=String.prototype.trim,a=0,c=function(e){var t=e.offsetTop;return null!=e.offsetParent&&(t+=c(e.offsetParent)),t},u=function(e){var t=e.offsetLeft;return null!=e.offsetParent&&(t+=u(e.offsetParent)),t},f=({isObject:function(e){return e===Object(e)},isArray:Array.isArray||function(e){return"[object Array]"==toString.call(e)},isEmpty:function(e){if(null==e)return!0;if(this.isArray(e)||this.isString(e))return 0===e.length;for(var t in e)if(this.has(e,t))return!1;return!0},mix:function(e,t,n){for(var i in t)e[i]=t[i];return e},extend:function(e,t,i,r){if(!t||!e)return e;var s,o=t.prototype;return s=n(o,e),e.prototype=this.mix(s,e.prototype),e.superclass=n(o,t),i&&this.mix(s,i),r&&this.mix(e,r),e},startsWith:function(e,t){return 0===e.lastIndexOf(t,0)},endsWith:function(e,t){var n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n},trim:l?function(e){return null==e?s:l.call(e)}:function(e){return null==e?s:(e+"").replace(o,s)},substitute:function(e,t,n){return"string"==typeof e&&t?e.replace(n||r,function(e,n){return"\\"===e.charAt(0)?e.slice(1):void 0===t[n]?s:t[n]}):e},vendor:function(){for(var e,t=document.createElement("div").style,n=["t","webkitT","MozT","msT","OT"],i=0,r=n.length;r>i;i++)if(e=n[i]+"ransform",e in t)return n[i].substr(0,n[i].length-1);return!1}(),prefixStyle:function(e){return this.vendor===!1?!1:""===this.vendor?e:this.vendor+e.charAt(0).toUpperCase()+e.substr(1)},hasClass:function(e,t){return e&&e.className&&t&&-1!=e.className.indexOf(t)},addClass:function(e,t){e&&t&&!this.hasClass(e,t)&&(e.className+=" "+t)},removeClass:function(e,t){e&&e.className&&t&&(e.className=e.className.replace(t,""))},remove:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},getOffsetTop:c,getOffsetLeft:u,findParentEl:function(e,t,n){var i=null,r=null,s=t.replace(/\.|#/g,"");if(n&&"string"==typeof n&&(n=document.querySelector(n)),n=n||document.body,e&&t){if(e.className&&e.className.match(s))return e;for(;!i&&r!=n&&(r=e.parentNode);){if(r.className&&r.className.match(s))return i=r;e=r}return null}},guid:function(e){var t=++a+"";return e?e+t:t},isAndroid:function(){return/Android /.test(window.navigator.appVersion)},isBadAndroid:function(){return/Android /.test(window.navigator.appVersion)&&!/Chrome\/\d/.test(window.navigator.appVersion)},px2Num:function(e){return Number(e.replace(/px/,""))},getNodes:i,getNode:function(e,t){var n=i(e,t);return n&&n[0]},stringifyStyle:function(e){var t="";for(var n in e)t+=[n,":",e[n],";"].join("");return t}}),d=["Arguments","Function","String","Number","Date","RegExp"],h=0;h<d.length;h++)f["is"+d[h]]=function(e){return toString.call(e)=="[object "+d[h]+"]"};return"object"==typeof module&&module.exports?e=f:f}(e),t=function(t){var n=e,i=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},r={on:function(e,t,n){if(!o(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!o(this,"once",e,[t,n])||!t)return this;var r=this,s=i(function(){r.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,n)},off:function(e,t,n){if(!this._events||!o(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(var i=e?[e]:Object.keys(this._events),r=0,s=i.length;s>r;r++){e=i[r];var l=this._events[e];if(l)if(t||n){for(var a=[],c=0,u=l.length;u>c;c++){var f=l[c];(t&&t!==f.callback&&t!==f.callback._callback||n&&n!==f.context)&&a.push(f)}a.length?this._events[e]=a:delete this._events[e]}else delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=Array.prototype.slice.call(arguments,1);if(!o(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&l(n,t),i&&l(i,arguments),this},listenTo:function(e,t,i){var r=this._listeningTo||(this._listeningTo={}),s=e._listenId||(e._listenId=n.guid("l"));return r[s]=e,i||"object"!=typeof t||(i=this),e.on(t,i,this),this},listenToOnce:function(e,t,n){if("object"==typeof t){for(var r in t)this.listenToOnce(e,r,t[r]);return this}var s=i(function(){this.stopListening(e,t,s),n.apply(this,arguments)});return s._callback=n,this.listenTo(e,t,s)},stopListening:function(e,t,i){var r=this._listeningTo;if(!r)return this;var s=!t&&!i;i||"object"!=typeof t||(i=this),e&&((r={})[e._listenId]=e);for(var o in r)e=r[o],e.off(t,i,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},s=/\s+/,o=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(s.test(n)){for(var o=n.split(s),l=0,a=o.length;a>l;l++)e[t].apply(e,[o[l]].concat(i));return!1}return!0},l=function(e,t){var n,i=-1,r=e.length,s=t[0],o=t[1],l=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,s);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,s,o);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,s,o,l);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t);return}};return r.bind=r.on,r.unbind=r.off,"object"==typeof module&&module.exports?t=r:r}(t),n=function(n){var i=e,r=t,s=function(){};return i.mix(s.prototype,r),i.mix(s.prototype,{plug:function(e){var t=this;if(e&&e.pluginId){t.__plugins||(t.__plugins=[]);var n=t.getPlugin(e.pluginId);return n&&t.unplug(e.pluginId),e.pluginInitializer(t),t.__plugins.push(e),t}},unplug:function(e){var t=this;if(e&&t.__plugins){var n="string"==typeof e?t.getPlugin(e):e;n.pluginDestructor(t);for(var i=0,r=t.__plugins.length;r>i;i++)if(t.__plugins[i]==n)return t.__plugins.splice(i,1)}},getPlugin:function(e){var t=this,n=[];if(t.__plugins){for(var i=0,r=t.__plugins.length;r>i;i++)t.__plugins[i]&&t.__plugins[i].pluginId==e&&n.push(t.__plugins[i]);return n.length>1?n:n[0]||null}}}),"object"==typeof module&&module.exports?n=s:s}(n),i=function(t){var i=e,r=n,s=i.prefixStyle("transform"),o=i.prefixStyle("transition"),l=function(e){l.superclass.constructor.call(this,e),this.userConfig=i.mix({transition:"all 0.5s ease"},e)};if(i.extend(l,r,{pluginId:"infinite",visibleElements:{},sections:{},pluginInitializer:function(e){var t=this;return t.xscroll=e,t.isY=!("y"!=e.userConfig.zoomType),t._={_top:t.isY?"_top":"_left",_height:t.isY?"_height":"_width",top:t.isY?"top":"left",height:t.isY?"height":"width",width:t.isY?"width":"height",y:t.isY?"y":"x",translate:t.isY?"translateY":"translateX",containerHeight:t.isY?"containerHeight":"containerWidth",scrollTop:t.isY?"scrollTop":"scrollLeft"},t._initInfinite(),e.on("afterrender",function(){t.render(),t._bindEvt()}),t},pluginDestructor:function(){for(var e=this,t=e._,n=0;n<e.infiniteLength;n++)e.infiniteElements[n].style[t.top]="auto",e.infiniteElements[n].style[s]="none",e.infiniteElements[n].style.visibility="hidden";return e.xscroll&&e.xscroll.off("scroll",e._updateByScroll,e),e.xscroll&&e.xscroll.off("tap panstart pan panend",e._cellEventsHandler,e),e},_initInfinite:function(){var e=this,t=e.xscroll,n=e._;return e.sections={},e.infiniteElements=t.renderTo.querySelectorAll(e.userConfig.infiniteElements),e.infiniteLength=e.infiniteElements.length,e.infiniteElementsCache=function(){for(var t=[],r=0;r<e.infiniteLength;r++)t.push({}),e.infiniteElements[r].style.position="absolute",e.infiniteElements[r].style[n.top]=0,e.infiniteElements[r].style.visibility="hidden",e.infiniteElements[r].style.display="block",i.addClass(e.infiniteElements[r],"_xs_infinite_elements_");return t}(),e.elementsPos={},e},_renderUnRecycledEl:function(){var e=this,t=e._,n=e.userConfig.gpuAcceleration?" translateZ(0) ":"";for(var r in e.__serializedData){var o=e.__serializedData[r];if(e.__serializedData[r].recycled===!1){var l=o.id&&document.getElementById(o.id.replace("#",""))||document.createElement("div"),a=i.guid("xs-row-");l.id=o.id||a,o.id=l.id,e.xscroll.content.appendChild(l);for(var c in o.style)c!=t.height&&"display"!=c&&"position"!=c&&(l.style[c]=o.style[c]);l.style[t.top]=0,l.style.position="absolute",l.style.display="block",l.style[t.height]=o[t._height]+"px",l.style[s]=t.translate+"("+o[t._top]+"px) "+n,i.addClass(l,o.className),e.userConfig.renderHook.call(e,l,o)}}},render:function(){var e=this,t=e._,n=e.xscroll,i=e.isY?n.getScrollTop():n.getScrollLeft();e.visibleElements=e.getVisibleElements(i),e.__serializedData=e._computeDomPositions(),n.sticky&&n.sticky.render(!0),n.fixed&&n.fixed.render();var r=n[t.height],s=e._containerSize;return r>s&&(s=r),n[t.containerHeight]=s,n.container.style[t.height]=s+"px",n.content.style[t.height]=s+"px",e._renderUnRecycledEl(),e._updateByScroll(),e._updateByRender(i),e.xscroll.boundryCheck(),e},_getChangedRows:function(e){var t=this,n={};for(var i in t.elementsPos)e.hasOwnProperty(i)||(n[i]="delete");for(var i in e)e[i].recycled&&!t.elementsPos.hasOwnProperty(i)&&(n[i]="add");return t.elementsPos=e,n},_updateByScroll:function(e){var t=this,n=t.xscroll,i=t._,r=e&&e[i.scrollTop],s=void 0===r?t.isY?n.getScrollTop():n.getScrollLeft():r,o=t.getVisibleElements(s),l=t.changedRows=t._getChangedRows(o);try{for(var a in l)if("delete"==l[a]&&t._pushEl(a),"add"==l[a]){var c=t._popEl(o[a][t.guid]),u=c.index,f=c.el;f&&(t.infiniteElementsCache[u].guid=o[a].guid,t.__serializedData[o[a].guid].__infiniteIndex=u,t._renderData(f,o[a]),t._renderStyle(f,o[a]))}}catch(e){console.warn("Not enough infiniteElements setted!")}return t},_updateByRender:function(e){var t,n,i=this,r=i._,s=i.xscroll,e=void 0===e?i.isY?s.getScrollTop():s.getScrollLeft():e,o=i.visibleElements,l=i.getVisibleElements(e);for(var a in l){n=l[a];for(var c in o)if(t=o[c],t.guid===n.guid)(n.style!=t.style||n[r._top]!=t[r._top]||n[r._height]!=t[r._height])&&i._renderStyle(i.infiniteElements[n.__infiniteIndex],n,!0),JSON.stringify(n.data)!=JSON.stringify(t.data)&&i._renderData(i.infiniteElements[n.__infiniteIndex],n);else if(i.__serializedData[n.guid].recycled&&void 0===i.__serializedData[n.guid].__infiniteIndex){var u=i._popEl();i.__serializedData[n.guid].__infiniteIndex=u.index,i._renderData(u.el,n),i._renderStyle(u.el,n)}}i.visibleElements=l},_computeDomPositions:function(){var e,t=this,n=t._,r=0,s=0,o=t.sections,l=[],a={};for(var c in o)for(var u=0,f=o[c].length;f>u;u++)e=o[c][u],e.sectionId=c,e.index=u,l.push(e);t.userConfig.maxSpeed=3;for(var c=0,d=l.length;d>c;c++){var h=l[c];s=h.style&&h.style[n.height]>=0&&"fixed"!=h.style.position?h.style[n.height]:0,h.guid=h.guid||i.guid(),h[n._top]=r,h[n._height]=s,h.recycled=h.recycled===!1?!1:!0,r+=s,a[h.guid]=h}return t._containerSize=r,a},getVisibleElements:function(e){var t,n=this,i=n.xscroll,r=n._,e=void 0===e?n.isY?i.getScrollTop():i.getScrollLeft():e,s=n.userConfig.threshold>=0?n.userConfig.threshold:i[r.height]/3,o={},l=n.__serializedData;for(var a in l)t=l[a],t[r._top]>=e-s&&t[r._top]<=e+i[r.height]+s&&(o[t.guid]=t);return JSON.parse(JSON.stringify(o))},_popEl:function(){for(var e=this,t=0;t<e.infiniteLength;t++)if(!e.infiniteElementsCache[t]._visible)return e.infiniteElementsCache[t]._visible=!0,{index:t,el:e.infiniteElements[t]}},_pushEl:function(e){for(var t=this,n=0;n<t.infiniteLength;n++)t.infiniteElementsCache[n].guid==e&&(t.infiniteElementsCache[n]._visible=!1,t.infiniteElements[n].style.visibility="hidden",t.infiniteElementsCache[n].guid=null)},_renderData:function(e,t){var n=this;e&&t&&"fixed"!=t.style.position&&n.userConfig.renderHook.call(n,e,t)},_renderStyle:function(e,t,n){var i=this,r=i._;if(e){var l=i.xscroll.userConfig.gpuAcceleration?" translateZ(0) ":"";for(var a in t.style)a!=r.height&&"display"!=a&&"position"!=a&&(e.style[a]=t.style[a]);e.setAttribute("xs-index",t.index),e.setAttribute("xs-sectionid",t.sectionId),e.setAttribute("xs-guid",t.guid),e.style.visibility="visible",e.style[r.height]=t[r._height]+"px",e.style[s]=r.translate+"("+t[r._top]+"px) "+l,e.style[o]=n?i.userConfig.transition:"none"}},getCell:function(e){var t=this,n=i.findParentEl(e.target,"._xs_infinite_elements_",t.xscroll.renderTo);n||(n=i.findParentEl(e.target,".xs-sticky-handler",t.xscroll.renderTo));var r=n&&n.getAttribute("xs-guid");return void 0!==r?{data:t.__serializedData[r],el:n}:void 0},_bindEvt:function(){var e=this;if(!e._isEvtBinded)return e._isEvtBinded=!0,e.xscroll.renderTo.addEventListener("webkitTransitionEnd",function(e){e.target.className.match(/xs-row/)&&(e.target.style.webkitTransition="")}),e.xscroll.on("scroll",e._updateByScroll,e),e.xscroll.on("tap panstart pan panend",e._cellEventsHandler,e),e},_cellEventsHandler:function(e){var t=this,n=t.getCell(e);e.cell=n.data,e.cellEl=n.el,e.cell&&t[e.type].call(t,e)},tap:function(e){return this.trigger("tap",e),this},panstart:function(e){return this.trigger("panstart",e),this},pan:function(e){return this.trigger("pan",e),this},panend:function(e){return this.trigger("panend",e),this},insertBefore:function(e,t,n){var i=this;return void 0===e||void 0===t||void 0===n?i:(i.sections[e]||(i.sections[e]=[]),i.sections[e].splice(t,0,n),i)},insertAfter:function(e,t,n){var i=this;return void 0===e||void 0===t||void 0===n?i:(i.sections[e]||(i.sections[e]=[]),i.sections[e].splice(Number(t)+1,0,n),i)},append:function(e,t){var n=this;return n.sections[e]||(n.sections[e]=[]),n.sections[e]=n.sections[e].concat(t),n},remove:function(e,t,n){var i=this,n=n||1;return void 0!==e&&i.sections[e]?void 0===t?(i.sections[e]=null,i):i.sections[e]&&i.sections[e][t]?(i.sections[e].splice(t,n),i):i:i},replace:function(e,t,n){var i=this;return void 0!==e&&i.sections[e]?(i.sections[e][t]=n,i):i},get:function(e,t){return void 0!==e?void 0===t?this.sections[e]:this.sections[e][t]:void 0}}),"object"==typeof module&&module.exports)t=l;else if(window.XScroll&&window.XScroll.Plugins)return XScroll.Plugins.Infinite=l;return t}(i)}();