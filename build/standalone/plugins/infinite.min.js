!function(){var e,t,i,n;e=function(e){function t(){}function i(e,i){var n;return Object.create?n=Object.create(e):(t.prototype=e,n=new t),n.constructor=i,n}for(var n=/\\?\{([^{}]+)\}/g,r="",s=/^[\s\xa0]+|[\s\xa0]+$/g,o=String.prototype.trim,l=0,a=function(e){var t=++l+"";return e?e+t:t},c=({isObject:function(e){return e===Object(e)},isArray:Array.isArray||function(e){return"[object Array]"==toString.call(e)},isEmpty:function(e){if(null==e)return!0;if(this.isArray(e)||this.isString(e))return 0===e.length;for(var t in e)if(this.has(e,t))return!1;return!0},mix:function(e,t){for(var i in t)e[i]=t[i];return e},extend:function(e,t,n,r){if(!t||!e)return e;var s,o=t.prototype;return s=i(o,e),e.prototype=this.mix(s,e.prototype),e.superclass=i(o,t),n&&this.mix(s,n),r&&this.mix(e,r),e},startsWith:function(e,t){return 0===e.lastIndexOf(t,0)},endsWith:function(e,t){var i=e.length-t.length;return i>=0&&e.indexOf(t,i)===i},trim:o?function(e){return null==e?r:o.call(e)}:function(e){return null==e?r:(e+"").replace(s,r)},substitute:function(e,t,i){return"string"==typeof e&&t?e.replace(i||n,function(e,i){return"\\"===e.charAt(0)?e.slice(1):void 0===t[i]?r:t[i]}):e},vendor:function(){for(var e,t=document.createElement("div").style,i=["t","webkitT","MozT","msT","OT"],n=0,r=i.length;r>n;n++)if(e=i[n]+"ransform",e in t)return i[n].substr(0,i[n].length-1);return!1}(),prefixStyle:function(e){return this.vendor===!1?!1:""===this.vendor?e:this.vendor+e.charAt(0).toUpperCase()+e.substr(1)},hasClass:function(e,t){return e&&e.className&&t&&-1!=e.className.indexOf(t)},addClass:function(e,t){e&&t&&!this.hasClass(e,t)&&(e.className+=" "+t)},removeClass:function(e,t){e&&e.className&&t&&(e.className=e.className.replace(t,""))},getOffsetTop:function(e){var t=e.offsetTop;return null!=e.offsetParent&&(t+=this.getOffsetTop(e.offsetParent)),t},getOffsetLeft:function(e){var t=e.offsetLeft;return null!=e.offsetParent&&(t+=this.getOffsetLeft(e.offsetParent)),t},findParentEl:function(e,t,i){var n=null;if(i=i||document.body,e&&t){if(e.className.match(t.replace(/\.|#/g,"")))return e;for(;!n&&(n=e.parentNode,e!=i);){if(n)return n;e=e.parentNode}return null}},guid:a,isAndroid:function(){return/Android /.test(window.navigator.appVersion)},isBadAndroid:function(){return/Android /.test(window.navigator.appVersion)&&!/Chrome\/\d/.test(window.navigator.appVersion)},px2Num:function(e){return Number(e.replace(/px/,""))}}),u=["Arguments","Function","String","Number","Date","RegExp"],f=0;f<u.length;f++)c["is"+u[f]]=function(e){return toString.call(e)=="[object "+u[f]+"]"};return"object"==typeof module&&module.exports?e=c:c}({}),n=function(t){var i=e,n=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}},r={on:function(e,t,i){if(!o(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,i){if(!o(this,"once",e,[t,i])||!t)return this;var r=this,s=n(function(){r.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,i)},off:function(e,t,i){if(!this._events||!o(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events=void 0,this;for(var n=e?[e]:Object.keys(this._events),r=0,s=n.length;s>r;r++){e=n[r];var l=this._events[e];if(l)if(t||i){for(var a=[],c=0,u=l.length;u>c;c++){var f=l[c];(t&&t!==f.callback&&t!==f.callback._callback||i&&i!==f.context)&&a.push(f)}a.length?this._events[e]=a:delete this._events[e]}else delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=Array.prototype.slice.call(arguments,1);if(!o(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&l(i,t),n&&l(n,arguments),this},listenTo:function(e,t,n){var r=this._listeningTo||(this._listeningTo={}),s=e._listenId||(e._listenId=i.guid("l"));return r[s]=e,n||"object"!=typeof t||(n=this),e.on(t,n,this),this},listenToOnce:function(e,t,i){if("object"==typeof t){for(var r in t)this.listenToOnce(e,r,t[r]);return this}var s=n(function(){this.stopListening(e,t,s),i.apply(this,arguments)});return s._callback=i,this.listenTo(e,t,s)},stopListening:function(e,t,n){var r=this._listeningTo;if(!r)return this;var s=!t&&!n;n||"object"!=typeof t||(n=this),e&&((r={})[e._listenId]=e);for(var o in r)e=r[o],e.off(t,n,this),(s||i.isEmpty(e._events))&&delete this._listeningTo[o];return this}},s=/\s+/,o=function(e,t,i,n){if(!i)return!0;if("object"==typeof i){for(var r in i)e[t].apply(e,[r,i[r]].concat(n));return!1}if(s.test(i)){for(var o=i.split(s),l=0,a=o.length;a>l;l++)e[t].apply(e,[o[l]].concat(n));return!1}return!0},l=function(e,t){var i,n=-1,r=e.length,s=t[0],o=t[1],l=t[2];switch(t.length){case 0:for(;++n<r;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<r;)(i=e[n]).callback.call(i.ctx,s);return;case 2:for(;++n<r;)(i=e[n]).callback.call(i.ctx,s,o);return;case 3:for(;++n<r;)(i=e[n]).callback.call(i.ctx,s,o,l);return;default:for(;++n<r;)(i=e[n]).callback.apply(i.ctx,t);return}};return r.bind=r.on,r.unbind=r.off,"object"==typeof module&&module.exports?t=r:r}({}),t=function(t){var i=e,r=n,s=function(){};return i.mix(s.prototype,r),i.mix(s.prototype,{plug:function(e){var t=this;e&&e.pluginId&&(t.__plugins||(t.__plugins=[]),e.pluginInitializer(t),t.__plugins.push(e))},unplug:function(e){var t=this;if(e){var i="string"==typeof e?t.getPlugin(e):e;i.pluginDestructor(t);for(var n in t.__plugins)if(t.__plugins[n]==i)return t.__plugins.splice(n,1)}},getPlugin:function(e){var t=this,i=[];for(var n in t.__plugins)t.__plugins[n]&&t.__plugins[n].pluginId==e&&i.push(t.__plugins[n]);return i.length>1?i:i[0]||null}}),"object"==typeof module&&module.exports?t=s:s}({}),i=function(i){var n=e,r=t,s=n.prefixStyle("transform"),o=n.prefixStyle("transition"),l=function(e){l.superclass.constructor.call(this,e),this.userConfig=n.mix({zoomType:"y",transition:"all 0.5s ease"},e)};return n.extend(l,r,{pluginId:"infinite",visibleElements:{},pluginInitializer:function(e){var t=this;return t.xscroll=e,t.isY=!("y"!=t.userConfig.zoomType),t._nameTop=t.isY?"_top":"_left",t._nameHeight=t.isY?"_height":"_width",t.nameTop=t.isY?"top":"left",t.nameHeight=t.isY?"height":"width",t.nameWidth=t.isY?"width":"height",t.nameY=t.isY?"y":"x",t.nameTranslate=t.isY?"translateY":"translateX",t.nameContainerHeight=t.isY?"containerHeight":"containerWidth",t.nameScrollTop=t.isY?"scrollTop":"scrollLeft",t._initInfinite(),e.on("afterrender",function(){t.render(),t._bindEvt()}),t},pluginDestructor:function(){var e=this;e.xscroll.off("scroll",e._updateByScroll,e);for(var t=0;t<e.infiniteLength;t++)e.infiniteElements[t].style.position="inherit",e.infiniteElements[t].style.visibility="inherit",e.infiniteElements[t].style.display="inherit",e.infiniteElements[t].style[e.nameTop]="auto",e.infiniteElements[t].style[s]="none";return e.xscroll.off("tap panstart pan panend",e._cellEventsHandler,e),e._destroySticky(),e},_initInfinite:function(){var e=this,t=e.xscroll;return e.sections={},e.infiniteElements=t.renderTo.querySelectorAll(e.userConfig.infiniteElements),e.infiniteLength=e.infiniteElements.length,e.infiniteElementsCache=function(){for(var t=[],i=0;i<e.infiniteLength;i++)t.push({}),e.infiniteElements[i].style.position="absolute",e.infiniteElements[i].style[e.nameTop]=0,e.infiniteElements[i].style.visibility="hidden",e.infiniteElements[i].style.display="block",n.addClass(e.infiniteElements[i],"_xs_infinite_elements_");return t}(),e.elementsPos={},t.on("scroll",e._updateByScroll,e),e},_initSticky:function(){var e=this;if(e.stickyDomInfo=[],e.hasSticky){if(!e._isStickyRendered){var t=document.createElement("div");t.style.position="fixed",t.style.left=0,t.style.top=0,t.style.display="none",n.addClass(t,"_xs_infinite_elements_"),e.xscroll.renderTo.appendChild(t),e.stickyElement=t,e._isStickyRendered=!0}for(var i in e.__serializedData){var t=e.__serializedData[i];t&&t.style&&"sticky"==t.style.position&&e.stickyDomInfo.push(t)}return e}},_destroySticky:function(){var e=this;return e.hasSticky=!1,e.stickyElement&&e.stickyElement.remove(),e._isStickyRendered=!1,e},_renderUnRecycledEl:function(){var e=this,t=e.userConfig.gpuAcceleration?" translateZ(0) ":"";for(var i in e.__serializedData){var r=e.__serializedData[i];if(e.__serializedData[i].recycled===!1){var o=r.id&&document.getElementById(r.id.replace("#",""))||document.createElement("div"),l=n.guid("xs-row-");o.id=r.id||l,r.id=o.id,e.xscroll.content.appendChild(o);for(var a in r.style)a!=e.nameHeight&&"display"!=a&&"position"!=a&&(o.style[a]=r.style[a]);o.style[e.nameTop]=0,o.style.position="absolute",o.style.display="block",o.style[e.nameHeight]=r[e._nameHeight]+"px",o.style[s]=e.nameTranslate+"("+r[e._nameTop]+"px) "+t,n.addClass(o,r.className),e.userConfig.renderHook.call(e,o,r)}}},render:function(){var e=this,t=e.xscroll,i=e.isY?t.getScrollTop():t.getScrollLeft();e.visibleElements=e.getVisibleElements(i),e.__serializedData=e._computeDomPositions(),e._initSticky();var n=t[e.nameHeight],r=e._containerSize;return n>r&&(r=n),t[e.nameContainerHeight]=r,t.container.style[e.nameHeight]=r+"px",t.content.style[e.nameHeight]=r+"px",e.curStickyIndex=void 0,e._renderUnRecycledEl(),e._updateByScroll(),e._updateByRender(i),e.xscroll.boundryCheck(),e},_getChangedRows:function(e){var t=this,i={};for(var n in t.elementsPos)e.hasOwnProperty(n)||(i[n]="delete");for(var n in e)e[n].recycled&&!t.elementsPos.hasOwnProperty(n)&&(i[n]="add");return t.elementsPos=e,i},_updateByScroll:function(e){var t=this,i=t.xscroll,n=e&&e[t.nameScrollTop],r=void 0===n?t.isY?i.getScrollTop():i.getScrollLeft():n,s=t.getVisibleElements(r),o=t._getChangedRows(s);for(var l in o)if("delete"==o[l]&&t._pushEl(l),"add"==o[l]){var a=t._popEl(s[l][t.guid]),c=a.index,u=a.el;u&&(t.infiniteElementsCache[c].guid=s[l].guid,t.__serializedData[s[l].guid].__infiniteIndex=c,t._renderData(u,s[l]),t._renderStyle(u,s[l]))}return t._stickyHandler(r),t},_updateByRender:function(e){var t,i,n=this,r=n.xscroll,e=void 0===e?n.isY?r.getScrollTop():r.getScrollLeft():e,s=n.visibleElements,o=n.getVisibleElements(e);for(var l in o){i=o[l];for(var a in s)if(t=s[a],t.guid===i.guid)(i.style!=t.style||i[n._nameTop]!=t[n._nameTop]||i[n._nameHeight]!=t[n._nameHeight])&&n._renderStyle(n.infiniteElements[i.__infiniteIndex],i,!0),JSON.stringify(i.data)!=JSON.stringify(t.data)&&n._renderData(n.infiniteElements[i.__infiniteIndex],i);else if(void 0===n.__serializedData[i.guid].__infiniteIndex){var c=n._popEl();n.__serializedData[i.guid].__infiniteIndex=c.index,n._renderData(c.el,i),n._renderStyle(c.el,i)}}n.visibleElements=o},_stickyHandler:function(e){var t=this;e=void 0===e?t.isY?t.xscroll.getScrollTop():t.xscroll.getScrollLeft():e;for(var i=Math.abs(e),r=[],o=[],l=0;l<t.stickyDomInfo.length;l++)o.push(t.stickyDomInfo[l][t._nameTop]),i>=t.stickyDomInfo[l][t._nameTop]&&r.push(l);if(!r.length)return t.stickyElement&&(t.stickyElement.style.display="none"),void(t.curStickyIndex=void 0);var a=Math.max.apply(null,r);if(t.curStickyIndex!==a){t.curStickyIndex=a,t.userConfig.renderHook.call(t,t.stickyElement,t.stickyDomInfo[t.curStickyIndex]),t.stickyElement.style.display="block",t.stickyElement.style[t.nameWidth]="100%",t.stickyElement.style[t.nameHeight]=t.stickyDomInfo[t.curStickyIndex].style[t.nameHeight]+"px",t.stickyElement.setAttribute("xs-guid",t.stickyDomInfo[t.curStickyIndex].guid),n.addClass(t.stickyElement,t.stickyDomInfo[t.curStickyIndex].className);for(var c in t.stickyDomInfo[t.curStickyIndex].style)c!=t.nameHeight&&"display"!=c&&"position"!=c&&(t.stickyElement.style[c]=t.stickyDomInfo[t.curStickyIndex].style[c])}var u=0;if(t.stickyDomInfo[t.curStickyIndex+1]){var f=t.stickyDomInfo[t.curStickyIndex],d=t.stickyDomInfo[t.curStickyIndex+1];u=e+f[t._nameHeight]>d[t._nameTop]&&e+f[t._nameHeight]<d[t._nameTop]+f[t._nameHeight]?f[t._nameHeight]+i-d[t._nameTop]:0}return t.stickyElement.style[s]=t.isY?"translateY(-"+u+"px) translateZ(0)":"translateX(-"+u+"px) translateZ(0)",e<Math.min.apply(null,o)?(t.stickyElement.style.display="none",void(t.curStickyIndex=void 0)):void 0},_computeDomPositions:function(){var e,t=this,i=0,r=0,s=t.sections;t.hasSticky=!1;var o=[],l={};for(var a in s)for(var c=0,u=s[a].length;u>c;c++)e=s[a][c],e.sectionId=a,e.index=c,o.push(e);t.userConfig.maxSpeed=3;for(var a=0,f=o.length;f>a;a++){var d=o[a];r=d.style&&d.style[t.nameHeight]>=0?d.style[t.nameHeight]:100,d.guid=d.guid||n.guid(),d[t._nameTop]=i,d[t._nameHeight]=r,d.recycled=d.recycled===!1?!1:!0,i+=r,!t.hasSticky&&d.style&&"sticky"==d.style.position&&(t.hasSticky=!0),l[d.guid]=d}return t._containerSize=i,l},getVisibleElements:function(e){var t,i=this,n=i.xscroll,e=void 0===e?i.isY?n.getScrollTop():n.getScrollLeft():e,r=50,s=Math.ceil(n[i.nameHeight]/r),o=void 0===i.userConfig.maxBufferedNum?Math.max(Math.ceil(s/3),1):i.userConfig.maxBufferedNum,e=Math.max(e-o*r,0),l={},a=i.__serializedData;for(var c in a)t=a[c],t[i._nameTop]>=e-r&&t[i._nameTop]<=e+2*o*r+n[i.nameHeight]&&(l[t.guid]=t);return JSON.parse(JSON.stringify(l))},_popEl:function(){for(var e=this,t=0;t<e.infiniteLength;t++)if(!e.infiniteElementsCache[t]._visible)return e.infiniteElementsCache[t]._visible=!0,{index:t,el:e.infiniteElements[t]}},_pushEl:function(e){for(var t=this,i=0;i<t.infiniteLength;i++)t.infiniteElementsCache[i].guid==e&&(t.infiniteElementsCache[i]._visible=!1,t.infiniteElements[i].style.visibility="hidden",delete t.infiniteElementsCache[i].guid)},_renderData:function(e,t){var i=this;e&&i.userConfig.renderHook.call(i,e,t)},_renderStyle:function(e,t,i){var n=this;if(e){var r=n.xscroll.userConfig.gpuAcceleration?" translateZ(0) ":"",l={color:"inherit",background:"inherit",margin:"inherit",padding:"inherit",opacity:"inherit",textIndent:"inherit",overflow:"inherit"};for(var a in l)e.style[a]=l[a];for(var a in t.style)a!=n.nameHeight&&"display"!=a&&"position"!=a&&(e.style[a]=t.style[a]);e.setAttribute("xs-index",t.index),e.setAttribute("xs-sectionid",t.sectionId),e.setAttribute("xs-guid",t.guid),e.style.visibility="visible",e.style[n.nameHeight]=t[n._nameHeight]+"px",e.style[s]=n.nameTranslate+"("+t[n._nameTop]+"px) "+r,e.style[o]=i?n.userConfig.transition:"none"}},getCell:function(e){var t=this,i=n.findParentEl(e.target,"._xs_infinite_elements_",t.xscroll.renderTo),r=i.getAttribute("xs-guid");return void 0!==r?t.__serializedData[r]:void 0},_bindEvt:function(){var e=this;if(!e._isEvtBinded)return e._isEvtBinded=!0,e.xscroll.renderTo.addEventListener("webkitTransitionEnd",function(e){e.target.className.match(/xs-row/)&&(e.target.style.webkitTransition="")}),e.xscroll.on("tap panstart pan panend",e._cellEventsHandler,e),e},_cellEventsHandler:function(e){var t=this;e.cell=t.getCell(e),e.cell&&t[e.type].call(t,e)},tap:function(e){return this.trigger("tap",e),this},panstart:function(e){return this.trigger("panstart",e),this},pan:function(e){return this.trigger("pan",e),this},panend:function(e){return this.trigger("panend",e),this},insertBefore:function(e,t,i){var n=this;return void 0===e||void 0===t||void 0===i?n:(n.sections[e]||(n.sections[e]=[]),n.sections[e].splice(t,0,i),n)},insertAfter:function(e,t,i){var n=this;return void 0===e||void 0===t||void 0===i?n:(n.sections[e]||(n.sections[e]=[]),n.sections[e].splice(Number(t)+1,0,i),n)},append:function(e,t){var i=this;return i.sections[e]||(i.sections[e]=[]),i.sections[e]=i.sections[e].concat(t),i},remove:function(e,t,i){var n=this,i=i||1;return void 0!==e&&n.sections[e]?void 0===t?(delete n.sections[e],n):n.sections[e]&&n.sections[e][t]?(n.sections[e].splice(t,i),n):n:n},replace:function(e,t,i){var n=this;return void 0!==e&&n.sections[e]?(n.sections[e][t]=i,n):n},get:function(e,t){return void 0!==e?void 0===t?this.sections[e]:this.sections[e][t]:void 0}}),"object"==typeof module&&module.exports?i=l:window.XScroll&&window.XScroll.Plugins&&(XScroll.Plugins.Infinite=l),i}({})}();