!function(){var t,e,n,r;t=function(t){function e(){}function n(t,n){var r;return Object.create?r=Object.create(t):(e.prototype=t,r=new e),r.constructor=n,r}for(var r=/\\?\{([^{}]+)\}/g,i="",o=/^[\s\xa0]+|[\s\xa0]+$/g,s=String.prototype.trim,l=0,u=function(t){var e=t.offsetTop;return null!=t.offsetParent&&(e+=u(t.offsetParent)),e},c=function(t){var e=t.offsetLeft;return null!=t.offsetParent&&(e+=c(t.offsetParent)),e},f=({isObject:function(t){return t===Object(t)},isArray:Array.isArray||function(t){return"[object Array]"==toString.call(t)},isEmpty:function(t){if(null==t)return!0;if(this.isArray(t)||this.isString(t))return 0===t.length;for(var e in t)if(this.has(t,e))return!1;return!0},mix:function(t,e){for(var n in e)t[n]=e[n];return t},extend:function(t,e,r,i){if(!e||!t)return t;var o,s=e.prototype;return o=n(s,t),t.prototype=this.mix(o,t.prototype),t.superclass=n(s,e),r&&this.mix(o,r),i&&this.mix(t,i),t},startsWith:function(t,e){return 0===t.lastIndexOf(e,0)},endsWith:function(t,e){var n=t.length-e.length;return n>=0&&t.indexOf(e,n)===n},trim:s?function(t){return null==t?i:s.call(t)}:function(t){return null==t?i:(t+"").replace(o,i)},substitute:function(t,e,n){return"string"==typeof t&&e?t.replace(n||r,function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?i:e[n]}):t},vendor:function(){for(var t,e=document.createElement("div").style,n=["t","webkitT","MozT","msT","OT"],r=0,i=n.length;i>r;r++)if(t=n[r]+"ransform",t in e)return n[r].substr(0,n[r].length-1);return!1}(),prefixStyle:function(t){return this.vendor===!1?!1:""===this.vendor?t:this.vendor+t.charAt(0).toUpperCase()+t.substr(1)},hasClass:function(t,e){return t&&t.className&&e&&-1!=t.className.indexOf(e)},addClass:function(t,e){t&&e&&!this.hasClass(t,e)&&(t.className+=" "+e)},removeClass:function(t,e){t&&t.className&&e&&(t.className=t.className.replace(e,""))},getOffsetTop:u,getOffsetLeft:c,findParentEl:function(t,e,n){var r=null,i=null,o=e.replace(/\.|#/g,"");if(n&&"string"==typeof n&&(n=document.querySelector(n)),n=n||document.body,t&&e){if(t.className.match(o))return t;for(;!r&&(p++,i!=n);){if(i=t.parentNode,i.className&&i.className.match(o))return r=i;t=i}return null}},guid:function(t){var e=++l+"";return t?t+e:e},isAndroid:function(){return/Android /.test(window.navigator.appVersion)},isBadAndroid:function(){return/Android /.test(window.navigator.appVersion)&&!/Chrome\/\d/.test(window.navigator.appVersion)},px2Num:function(t){return Number(t.replace(/px/,""))}}),a=["Arguments","Function","String","Number","Date","RegExp"],p=0;p<a.length;p++)f["is"+a[p]]=function(t){return toString.call(t)=="[object "+a[p]+"]"};return"object"==typeof module&&module.exports?t=f:f}({}),r=function(e){var n=t,r=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},i={on:function(t,e,n){if(!s(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!s(this,"once",t,[e,n])||!e)return this;var i=this,o=r(function(){i.off(t,o),e.apply(this,arguments)});return o._callback=e,this.on(t,o,n)},off:function(t,e,n){if(!this._events||!s(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(var r=t?[t]:Object.keys(this._events),i=0,o=r.length;o>i;i++){t=r[i];var l=this._events[t];if(l)if(e||n){for(var u=[],c=0,f=l.length;f>c;c++){var a=l[c];(e&&e!==a.callback&&e!==a.callback._callback||n&&n!==a.context)&&u.push(a)}u.length?this._events[t]=u:delete this._events[t]}else delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=Array.prototype.slice.call(arguments,1);if(!s(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&l(n,e),r&&l(r,arguments),this},listenTo:function(t,e,r){var i=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.guid("l"));return i[o]=t,r||"object"!=typeof e||(r=this),t.on(e,r,this),this},listenToOnce:function(t,e,n){if("object"==typeof e){for(var i in e)this.listenToOnce(t,i,e[i]);return this}var o=r(function(){this.stopListening(t,e,o),n.apply(this,arguments)});return o._callback=n,this.listenTo(t,e,o)},stopListening:function(t,e,r){var i=this._listeningTo;if(!i)return this;var o=!e&&!r;r||"object"!=typeof e||(r=this),t&&((i={})[t._listenId]=t);for(var s in i)t=i[s],t.off(e,r,this),(o||n.isEmpty(t._events))&&delete this._listeningTo[s];return this}},o=/\s+/,s=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(o.test(n)){for(var s=n.split(o),l=0,u=s.length;u>l;l++)t[e].apply(t,[s[l]].concat(r));return!1}return!0},l=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],l=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,l);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}};return i.bind=i.on,i.unbind=i.off,"object"==typeof module&&module.exports?e=i:i}({}),e=function(e){var n=t,i=r,o=function(){};return n.mix(o.prototype,i),n.mix(o.prototype,{plug:function(t){var e=this;if(t&&t.pluginId){e.__plugins||(e.__plugins=[]);var n=e.getPlugin(t.pluginId);return n&&e.unplug(t.pluginId),t.pluginInitializer(e),e.__plugins.push(t),e}},unplug:function(t){var e=this;if(t){var n="string"==typeof t?e.getPlugin(t):t;n.pluginDestructor(e);for(var r in e.__plugins)if(e.__plugins[r]==n)return e.__plugins.splice(r,1)}},getPlugin:function(t){var e=this,n=[];for(var r in e.__plugins)e.__plugins[r]&&e.__plugins[r].pluginId==t&&n.push(e.__plugins[r]);return n.length>1?n:n[0]||null}}),"object"==typeof module&&module.exports?e=o:o}({}),n=function(n){var r=t,i=e,o=function(t){o.superclass.constructor.call(this,t),this.userConfig=r.mix({imgsSelector:"img",delay:200,formatter:function(t){return t}},t)};if(r.extend(o,i,{pluginId:"lazyload",pluginInitializer:function(t){var e=this;return e.xscroll=t,e.reset(),e._bindEvt(),e},pluginDestructor:function(){var t=this;t.xscroll&&(t.xscroll.off("scroll scrollend afterrender",t._filterItem,t),t.xscroll.off("scroll scrollend afterrender",t._filterItemByInfinite,t)),t._isEvtBinded=!1},_setImgSrc:function(t){if(t){var e=t.getAttribute("data-src"),n=this.userConfig.formatter.call(self,e);n&&t.setAttribute("src",n)}},_filterItem:function(t){var e,n=this,t=t||n.xscroll.getScrollPos(),r="x"==n.zoomType?t.scrollLeft:t.scrollTop,i="x"==n.zoomType?"offsetWidth":"offsetHeight",o="x"==n.zoomType?"left":"top",s="x"==n.zoomType?"right":"bottom";for(var l in n.positions)e=n.positions[l],(e[o]>=r&&e[o]<=r+n.xscroll.renderTo[i]||e[s]>=r&&e[s]<=r+n.xscroll.renderTo[i])&&n._setImgSrc(n.imgs[l])},_filterItemByInfinite:function(){var t=this,e=t.xscroll.getPlugin("infinite");clearTimeout(t._timeout),t._timeout=setTimeout(function(){if(!t.xscroll["isScrolling"+t.zoomType.toUpperCase()])for(var n=0;n<e.infiniteLength;n++)if(e.infiniteElementsCache[n]._visible&&e.infiniteElements[n])for(var r=e.infiniteElements[n].querySelectorAll(t.userConfig.imgsSelector),i=0,o=r.length;o>i;i++)t._setImgSrc(r[i])},t.userConfig.delay)},reset:function(){var t,e,n=this;n.zoomType=n.xscroll.userConfig.lockX?"y":"x",n.imgs=n.xscroll.renderTo.querySelectorAll(n.userConfig.imgsSelector);var i=(n.xscroll.getScrollPos(),"x"==n.zoomType?"left":"top"),o="x"==n.zoomType?"right":"bottom",s="x"==n.zoomType?r.getOffsetLeft:r.getOffsetTop,l="x"==n.zoomType?"offsetWidth":"offsetHeight",u="x"==n.zoomType?"width":"height";n.positions=[];for(var c=0,f=n.imgs.length;f>c;c++)t=n.imgs[c],e={},e[i]=s(t),e[u]=t[l],e[o]=e[i]+e[u],n.positions.push(e);return n},_bindEvt:function(){var t=this;if(!t._isEvtBinded){t._isEvtBinded=!0;var e=t.xscroll.userConfig.useOriginScroll?"scroll":"scrollend";t.xscroll.on("afterrender",t.xscroll.getPlugin("infinite")?t._filterItemByInfinite:t._filterItem,t),t.xscroll.getPlugin("infinite")?t.xscroll.on(e,t._filterItemByInfinite,t):t.xscroll.on(e,t._filterItem,t)}}}),"object"==typeof module&&module.exports)n=o;else if(window.XScroll&&window.XScroll.Plugins)return XScroll.Plugins.LazyLoad=o;return n}({})}();