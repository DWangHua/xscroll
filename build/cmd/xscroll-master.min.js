define(function(e,r,t){var n=e("./util"),o=e("./base"),i=e("./xscroll"),s=function(e){s.superclass.constructor.call(this,e),this.init(e)};return n.extend(s,o,{init:function(e){var r=this;return r.userConfig=n.mix({selector:".xscroll"},e),r},get:function(e){var r=this;if(e)for(var t=0,n=r.xscrolls.length;n>t;t++)if(r.xscrolls[t].renderTo.id===e)return r.xscrolls[t]},getElPos:function(){for(var e=this,r=[],t=document.querySelectorAll(e.userConfig.selector),n=0;n<t.length;n++){var o=t[n].querySelector(".xs-content");r.push({el:t[n],containerWidth:o.offsetWidth,containerHeight:o.offsetHeight,width:t[n].offsetWidth,height:t[n].offsetHeight})}return r},render:function(){var e=this,r=function(e,r){if(e&&r)for(var t=0,n=r.length;n>t;t++)if(r[t].renderTo===e)return r[t]},t=document.querySelectorAll(e.userConfig.selector),n=e.getElPos();e.xscrolls=[];for(var o=0;o<t.length;o++)e.xscrolls.push(new i({renderTo:t[o],containerWidth:n[o].containerWidth,containerHeight:n[o].containerHeight,width:n[o].width,height:n[o].height}).render());for(var o=0,s=e.xscrolls.length;s>o;o++)for(var l=e.xscrolls[o].renderTo.querySelectorAll(e.userConfig.selector),c=0;c<l.length;c++){var h=r(l[c],e.xscrolls);h&&e.xscrolls[o].controller&&e.xscrolls[o].controller.add(h)}return e._bindEvt(),e},_bindEvt:function(){var e=this;window.addEventListener("resize",function(){setTimeout(function(){for(var r=e.getElPos(),t=0,n=e.xscrolls.length;n>t;t++){var o=e.xscrolls[t];o.userConfig.containerWidth=r[t].containerWidth,o.userConfig.containerHeight=r[t].containerHeight,o.userConfig.width=r[t].width,o.userConfig.height=r[t].height,o.boundry.refresh({width:o.userConfig.width,height:o.userConfig.height}),o.boundryCheck(0),o.render()}},0)},e)}}),"object"==typeof t&&t.exports?void(t.exports=s):window.XScrollMaster=s});